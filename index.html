<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸ä½äººæ–‡å°ˆé¡Œï¼šä¸‰éš»å°è±¬æ–‡æœ¬æµè®Šæ¨¡æ“¬</title>
    <style>
        /* --- å…¨å±€è¨­å®š --- */
        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: #eef2f3;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
        }

        /* --- å¡ç‰‡å®¹å™¨è¨­è¨ˆ --- */
        .container {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            width: 90%;
            max-width: 800px;
            text-align: center;
            transition: all 0.3s ease;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        h2 {
            color: #555;
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        p.subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: -10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }

        /* --- éšæ®µæ§åˆ¶ --- */
        .stage {
            display: none; /* é è¨­éš±è— */
            animation: fadeIn 0.8s ease;
        }
        .stage.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- å·¨å‹ Emoji åœ–ç¤º --- */
        .icon-display {
            font-size: 6rem;
            margin-bottom: 20px;
            display: inline-block;
        }

        /* --- æ–æ™ƒå‹•ç•« (çµ¦å¤§é‡ç‹¼å¹æ°£ç”¨) --- */
        .shake {
            animation: shake 0.5s;
            animation-iteration-count: infinite;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        /* --- æŒ‰éˆ•ç¾¤çµ„ --- */
        .btn-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        /* æè³ªæŒ‰éˆ•é¡è‰² */
        .btn-straw { background-color: #f1c40f; color: #333; }
        .btn-wood { background-color: #d35400; color: white; }
        .btn-brick { background-color: #c0392b; color: white; }

        /* å‘½é‹æŒ‰éˆ•é¡è‰² */
        .btn-bad { background-color: #34495e; color: white; }
        .btn-good { background-color: #27ae60; color: white; }
        
        .btn-reset { 
            background-color: #3498db; 
            color: white; 
            margin-top: 30px;
            padding: 10px 40px;
        }

        /* --- Metadata è³‡æ–™å¡æ¨£å¼ (åœ–è³‡ç³»é‡é») --- */
        .metadata-box {
            background-color: #f8f9fa;
            border-left: 6px solid #2980b9;
            padding: 20px;
            margin: 30px auto;
            text-align: left;
            border-radius: 0 10px 10px 0;
            max-width: 600px;
        }
        
        .metadata-title {
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 10px;
            display: block;
            font-size: 1.1rem;
        }

        .metadata-content {
            line-height: 1.8;
            font-size: 1rem;
            color: #555;
        }

        .result-highlight {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            margin: 20px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ä¸‰éš»å°è±¬ï¼šæ–‡æœ¬æµè®Šæ¨¡æ“¬å™¨</h1>
    <p class="subtitle">Digital Humanities Project: The Evolution of The Three Little Pigs</p>

    <div id="stage-build" class="stage active">
        <div class="icon-display">ğŸ·</div>
        <h2>è«‹é¸æ“‡å»ºç¯‰ææ–™é€²è¡Œæ–‡æœ¬æ¨¡æ“¬ï¼š</h2>
        <div class="btn-group">
            <button class="btn-straw" onclick="buildHouse('straw')">ğŸŒ¾ ç¨»è‰ (é˜²ç¦¦åŠ›: 10)</button>
            <button class="btn-wood" onclick="buildHouse('wood')">ğŸªµ æœ¨é ­ (é˜²ç¦¦åŠ›: 50)</button>
            <button class="btn-brick" onclick="buildHouse('brick')">ğŸ§± ç£šå¡Š (é˜²ç¦¦åŠ›: 100)</button>
        </div>
    </div>

    <div id="stage-blow" class="stage">
        <div class="icon-display" id="house-icon">ğŸ </div>
        <h2 id="blow-message">å¤§é‡ç‹¼æ­£åœ¨ç”¨åŠ›å¹æ°£...</h2>
        <div class="icon-display">ğŸŒ¬ï¸ğŸº</div>
    </div>

    <div id="stage-fate" class="stage">
        <div class="icon-display">ğŸ’¥</div>
        <h2>æˆ¿å­å€’å¡Œäº†ï¼</h2>
        <p style="font-size: 1.2rem; margin-bottom: 20px;">
            æ­¤è™•ç‚ºæ•…äº‹çš„åˆ†æ­§é»ã€‚<br>èº«ç‚ºæ•˜äº‹è€…ï¼Œæ‚¨å¸Œæœ›æ¡ç”¨å“ªå€‹æ™‚ä»£çš„çµå±€ç‰ˆæœ¬ï¼Ÿ
        </p>
        <div class="btn-group">
            <button class="btn-bad" onclick="chooseFate('bad')">ğŸ’€ 1890 åŸç‰ˆ (æ‚²åŠ‡)</button>
            <button class="btn-good" onclick="chooseFate('good')">ğŸƒ 1933 æ”¹ç·¨ç‰ˆ (å–œåŠ‡)</button>
        </div>
    </div>

    <div id="stage-end" class="stage">
        <div class="icon-display" id="end-icon">ğŸ“–</div>
        <div class="result-highlight" id="end-text"></div>
        
        <div class="metadata-box">
            <span class="metadata-title">ã€æ–‡ç»è€ƒè­‰ Metadataã€‘</span>
            <div class="metadata-content">
                <strong>å‡ºè™•ï¼š</strong> <span id="meta-source"></span><br>
                <strong>å¹´ä»½ï¼š</strong> <span id="meta-year"></span><br>
                <strong>æ–‡åŒ–æ„æ¶µï¼š</strong> <span id="meta-desc"></span>
            </div>
        </div>

        <button class="btn-reset" onclick="resetGame()">ğŸ”„ é‡æ–°æ¨¡æ“¬</button>
    </div>
</div>

<script>
    // --- è³‡æ–™å±¤ (Model) ---
    const materials = {
        'straw': { name: 'ç¨»è‰å±‹', defense: 10, icon: 'ğŸŒ¾ğŸ ' },
        'wood': { name: 'æœ¨å±‹', defense: 50, icon: 'ğŸªµğŸ ' },
        'brick': { name: 'ç£šå¡Šå±‹', defense: 100, icon: 'ğŸ§±ğŸ ' }
    };

    const wolfPower = 60; // å¤§é‡ç‹¼æ”»æ“ŠåŠ›é–¾å€¼

    // --- è¦–åœ–æ§åˆ¶å±¤ (View) ---
    function showStage(stageId) {
        // éš±è—æ‰€æœ‰éšæ®µ
        document.querySelectorAll('.stage').forEach(el => el.classList.remove('active'));
        // é¡¯ç¤ºæŒ‡å®šéšæ®µ
        document.getElementById(stageId).classList.add('active');
    }

    // --- é‚è¼¯æ§åˆ¶å±¤ (Controller) ---

    // 1. ç©å®¶é¸æ“‡è“‹æˆ¿å­
    function buildHouse(type) {
        const material = materials[type];
        
        // è¨­å®šå¹æ°£éšæ®µçš„ç•«é¢
        document.getElementById('blow-message').innerText = `å¤§é‡ç‹¼å°è‘—${material.name}ç”¨åŠ›å¹æ°£...`;
        document.getElementById('house-icon').innerText = material.icon;
        
        // åŠ å…¥æ–æ™ƒå‹•ç•«
        document.getElementById('house-icon').classList.add('shake');
        
        showStage('stage-blow');

        // æ¨¡æ“¬ 2 ç§’çš„ç·Šå¼µæ„Ÿï¼Œç„¶å¾Œåˆ¤æ–·çµæœ
        setTimeout(() => {
            document.getElementById('house-icon').classList.remove('shake'); // åœæ­¢æ–æ™ƒ

            if (material.defense < wolfPower) {
                // æˆ¿å­å€’å¡Œ -> é€²å…¥å‘½é‹é¸æ“‡
                showStage('stage-fate');
            } else {
                // æˆ¿å­å …å›º -> ç›´æ¥é€²å…¥å‹åˆ©çµå±€
                showVictory();
            }
        }, 2000);
    }

    // 2. è™•ç†å‹åˆ© (ç£šå¡Šå±‹)
    function showVictory() {
        const text = "æˆ¿å­ç´‹é¢¨ä¸å‹•ï¼å¤§é‡ç‹¼æ°£å–˜åååœ°æ”¾æ£„äº†ã€‚å°è±¬åœ¨æº«æš–çš„çˆç«é‚Šç…®è‘—æ¹¯ã€‚";
        const meta = {
            source: "Common Version (æ™®éæµå‚³ç‰ˆ)",
            year: "19th - 21st Century",
            desc: "ç£šå¡Šå±‹çš„å‹åˆ©æ˜¯æ‰€æœ‰ç‰ˆæœ¬çš„å…±åŒæ ¸å¿ƒã€‚é€™åæ˜ äº†ç¤¾æœƒå°ã€Œå‹¤å‹‰ã€èˆ‡ã€Œé•·é è¦åŠƒã€åƒ¹å€¼è§€çš„è‚¯å®šï¼Œä¹Ÿæ˜¯å·¥æ¥­ç¤¾æœƒå¼·èª¿å …å›ºçµæ§‹çš„éš±å–»ã€‚"
        };
        renderEnd(text, meta, 'ğŸ‰');
    }

    // 3. è™•ç†ç©å®¶é¸æ“‡çš„å‘½é‹ (æ ¸å¿ƒåŠŸèƒ½)
    function chooseFate(fateType) {
        let text = "";
        let meta = {};
        let icon = "";

        if (fateType === 'bad') {
            // æ‚²åŠ‡çµå±€
            text = "æˆ¿å­å€’å¡Œï¼Œå°è±¬ä¾†ä¸åŠé€ƒè·‘ï¼Œè¢«å¤§é‡ç‹¼ä¸€å£åæ‰äº†ï¼";
            icon = "ğŸ½ï¸";
            meta = {
                source: "Joseph Jacobs, English Fairy Tales",
                year: "1890",
                desc: "åŸå§‹æ°‘é–“æ•…äº‹ç‰ˆæœ¬éå¸¸æ®˜é…·ã€‚åœ¨é‚£å€‹æ™‚ä»£ï¼Œç«¥è©±æ•…äº‹å¾€å¾€ç”¨ä¾†è­¦ç¤ºå…’ç«¥ã€Œæ‡¶æƒ°æœƒå°è‡´æ­»äº¡ã€ï¼Œæ²’æœ‰ç¾ä»£è¿ªå£«å°¼å¼çš„æº«æƒ…èˆ‡æ•‘è´–ã€‚"
            };
        } else {
            // å–œåŠ‡çµå±€ - é€™è£¡ä¿®æ­£äº†ï¼šå“¥å“¥æ”¹ç‚ºè±¬å°å¼Ÿ
            text = "æˆ¿å­å€’å¡Œçš„ä¸€ç¬é–“ï¼Œå°è±¬æ‹”è…¿ç‹‚å¥”ï¼ŒæˆåŠŸé€ƒé€²äº†è±¬å°å¼Ÿçš„ç£šå¡Šå±‹ï¼";
            icon = "ğŸƒğŸ’¨";
            meta = {
                source: "Walt Disney Animation, Three Little Pigs",
                year: "1933",
                desc: "æ­¤ç‰ˆæœ¬ç™¼è¡Œæ–¼ç¶“æ¿Ÿå¤§è•­æ¢æœŸé–“ã€‚è¿ªå£«å°¼ä¿®æ”¹äº†çµå±€ï¼Œå¼·èª¿ã€Œåœ˜çµåŠ›é‡å¤§ã€èˆ‡ã€Œå¸Œæœ›ã€ï¼Œç‚ºäº†çµ¦äºˆç•¶æ™‚ç—›è‹¦çš„ç¤¾æœƒå¤§çœ¾å¿ƒç†æ…°è—‰ï¼Œå› æ­¤å°è±¬å¿…é ˆæ´»ä¸‹ä¾†ã€‚"
            };
        }

        renderEnd(text, meta, icon);
    }

    // 4. æ¸²æŸ“æœ€çµ‚çµæœ
    function renderEnd(text, meta, icon) {
        document.getElementById('end-text').innerText = text;
        document.getElementById('end-icon').innerText = icon;
        
        document.getElementById('meta-source').innerText = meta.source;
        document.getElementById('meta-year').innerText = meta.year;
        document.getElementById('meta-desc').innerText = meta.desc;

        showStage('stage-end');
    }

    // 5. é‡æ–°é–‹å§‹
    function resetGame() {
        showStage('stage-build');
    }
</script>

</body>
</html>
